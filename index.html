<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dashboard FÃªnix Industrial</title>

<link rel="stylesheet" href="style.css" />

<!-- BIBLIOTECA PAHO MQTT (LINK 100% FUNCIONAL) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/mqttws31.min.js"></script>

<!-- APP PRINCIPAL (DEFER PARA CARREGAR DEPOIS DO PAHO) -->
<script defer src="app.js"></script>

</head>
<body>

<header>
  <div class="logo-box">
    <img src="logo.png" height="50">
    FÃªnix SoluÃ§Ãµes Industriais
  </div>

  <div class="status-box">
    <div><b>MQTT:</b> <span id="mqtt-status" class="red">Desconectado</span></div>
    <div><b>CENTRAL:</b> <span id="central-status" class="red">Desligada</span></div>
  </div>
</header>

<div class="container">

  <div class="left-col">

    <div class="card">
      <div class="card-title">âš™ï¸ Status do Sistema</div>

      <button onclick="toggleSistema()" class="btn-blue">ğŸ”˜ Ligar/Desligar Sistema</button>

      <div class="row"><span class="label">Sistema:</span> <span id="sistema"></span></div>
      <div class="row"><span class="label">Fase:</span> <span id="fase"></span></div>
      <div class="row"><span class="label">Mod. OperaÃ§Ã£o:</span> <span id="modo"></span></div>
      <div class="row"><span class="label">PoÃ§o Atual:</span> <span id="pocoAtivo"></span></div>
    </div>

    <div class="card">
      <div class="card-title">ğŸ”§ ConfiguraÃ§Ãµes</div>

      <button onclick="enviarConfig()" class="btn-green">ğŸ“¤ Enviar ConfiguraÃ§Ãµes</button>

      <div class="row"><span class="label">Intervalo RodÃ­zio:</span> 
        <input id="rodizio" type="number" min="1" max="240"> min
      </div>

      <div class="row"><span class="label">Retro A:</span> 
        <select id="retroA">
          <option value="1">P1</option>
          <option value="2">P2</option>
          <option value="3">P3</option>
        </select>
      </div>

      <div class="row"><span class="label">Retro B:</span> 
        <select id="retroB">
          <option value="1">P1</option>
          <option value="2">P2</option>
          <option value="3">P3</option>
        </select>
      </div>

      <div class="row"><span class="label">Timeout:</span> 
        <input id="timeout" type="number" min="5" max="60"> s
      </div>
    </div>

    <div class="card">
      <div class="card-title">ğŸ“˜ HistÃ³rico de Retrolavagem</div>
      <div id="historico" class="history"></div>
    </div>

  </div>

  <div class="right-col">

    <div class="well-card">
      <div class="well-title">ğŸš° PoÃ§o 01</div>
      <div class="row"><span class="label">ComunicaÃ§Ã£o:</span> <span id="p1_online"></span></div>
      <div class="row"><span class="label">Timer:</span> <span id="p1_timer"></span></div>
    </div>

    <div class="well-card">
      <div class="well-title">ğŸš° PoÃ§o 02</div>
      <div class="row"><span class="label">ComunicaÃ§Ã£o:</span> <span id="p2_online"></span></div>
      <div class="row"><span class="label">Timer:</span> <span id="p2_timer"></span></div>
    </div>

    <div class="well-card">
      <div class="well-title">ğŸš° PoÃ§o 03</div>
      <div class="row"><span class="label">ComunicaÃ§Ã£o:</span> <span id="p3_online"></span></div>
      <div class="row"><span class="label">Timer:</span> <span id="p3_timer"></span></div>
    </div>

  </div>
</div>

</body>
</html>
