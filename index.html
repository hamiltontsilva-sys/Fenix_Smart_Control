<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Level - Dashboard</title>

<link rel="stylesheet" href="style.css">

<style>
/* Ajuste r√°pido do cabe√ßalho caso o CSS ainda esteja vazio */
.logo-img { height: 80px; }
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: #e0e0e0;
    border-bottom: 4px solid #2f75b5;
}
.connect-box {
    text-align: right;
    font-size: 18px;
}
</style>

</head>
<body>

<header>
    <img src="logo.png" class="logo-img" alt="Logo">
    <div class="connect-box">
        <strong>MQTT:</strong> <span id="conn-status">OFF</span><br>
        <strong>CENTRAL:</strong> <span id="central-status">-</span>
    </div>
</header>

<main class="grid">

    <!-- STATUS DO SISTEMA -->
    <section class="card status">
        <h3>Status do sistema</h3>
        <div class="row"><label>Sistema:</label><div id="sistema">-</div></div>
        <div class="row"><label>Fase:</label><div id="poco_ativo">-</div></div>
        <div class="row"><label>Mod. Opera√ß√£o:</label><div id="manual">-</div></div>
        <div class="row"><label>Rod√≠zio (min):</label><div id="rodizio_min">-</div></div>
    </section>

    <!-- CONFIGURA√á√ïES -->
    <section class="card config">
        <h3>Configura√ß√µes</h3>

        <div class="row">
            <label>Intervalo Rodizio:</label>
            <input id="cfg_rodizio" type="number" min="1" max="240">
        </div>

        <div class="row">
            <label>RetroA:</label>
            <select id="cfg_retroA">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>

        <div class="row">
            <label>RetroB:</label>
            <select id="cfg_retroB">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>

        <div class="row">
            <label>Timeout (s):</label>
            <input id="cfg_timeout" type="number" min="5">
        </div>

        <div class="row">
            <button id="btnSend">Enviar</button>
            <button id="btnToggle" class="secondary">Toggle Central</button>
        </div>
    </section>

    <!-- PO√áO 1 -->
    <section class="card well">
        <h3>Po√ßo 01</h3>
        <div class="row"><label>Comunica√ß√£o:</label><div id="p1_online">-</div></div>
        <div class="row"><label>Fluxo:</label><div id="p1_fluxo">-</div></div>
        <div class="row"><label>Acumulado ON (s):</label><div id="p1_timer">-</div></div>
    </section>

    <!-- PO√áO 2 -->
    <section class="card well">
        <h3>Po√ßo 02</h3>
        <div class="row"><label>Comunica√ß√£o:</label><div id="p2_online">-</div></div>
        <div class="row"><label>Fluxo:</label><div id="p2_fluxo">-</div></div>
        <div class="row"><label>Acumulado ON (s):</label><div id="p2_timer">-</div></div>
    </section>

    <!-- PO√áO 3 -->
    <section class="card well">
        <h3>Po√ßo 03</h3>
        <div class="row"><label>Comunica√ß√£o:</label><div id="p3_online">-</div></div>
        <div class="row"><label>Fluxo:</label><div id="p3_fluxo">-</div></div>
        <div class="row"><label>Acumulado ON (s):</label><div id="p3_timer">-</div></div>
    </section>

    <!-- TIMERS JSON -->
    <section class="card timers">
        <h3>Timers (JSON)</h3>
        <pre id="timers_json">-</pre>
    </section>

    <!-- HIST√ìRICO -->
    <section class="card history">
        <h3>Hist√≥rico de retrolavagem</h3>
        <ul id="history_list"></ul>
    </section>

</main>

<footer>
    <small>Conectando via WebSocket em: <code>wss://y1184ab7.ala.us-east-1.emqxsl.com:8084/mqtt</code></small>
</footer>

<!-- üî• BIBLIOTECA MQTT LOCAL -->
<script src="paho-mqtt.js"></script>

<!-- üî• SCRIPT PRINCIPAL -->
<script src="app.js"></script>

</body>
</html>
